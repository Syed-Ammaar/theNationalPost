<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News Site</title>
    <link rel="stylesheet" href="style.css">
</head>
<script>
    const API_KEY = "3b90323ae7f741e392db588f2bd6a1a8";
const url="https://newsapi.org/v2/everything?q=";

window.addEventListener('load',() => fetchNews("India"));

async function fetchNews(query){
    const res= await fetch(`${url}${query}&apiKey=${API_KEY}`);
    const data= await res.json();
    bindData(data.articles);
}

function bindData(articles){
    const cardsContainer= document.getElementById("cards-container");
    const newsTemplate= document.getElementById("template-card");

    cardsContainer.innerHTML='';
    articles.forEach(article => {
        if(!article.urlToImage) return;
        const Clone= newsTemplate.content.cloneNode(true);

        fillData(Clone, article);
        cardsContainer.appendChild(Clone);


    });
}


function fillData(Clone, article){
    const newsImg = Clone.querySelector('#news-img');
    const newsTitle = Clone.querySelector('#news-title');
    const newsSource = Clone.querySelector('#news-source');
    const newsDesc = Clone.querySelector('#news-desc');

    newsImg.src= article.urlToImage;
    newsTitle.innerHTML= article.title;
    newsDesc.innerHTML= article.description;
    const date= new Date(article.publishedAt).toLocaleString("en-uS",{
        timeZone: "Asia/Jakarta"
    });
    newsSource.innerHTML= `${article.source.name} . ${date}`;

    Clone.firstElementChild.addEventListener("click",()=>{
        window.open(article.url,"_blank");
    }) 
}

const searchButton = document.getElementById('search-button');
const searchText= document.getElementById('search-text');

searchButton.addEventListener('click',()=>{
    const query = searchText.value;
    if(!query) return;
    fetchNews(query);
});
</script>
<body>
    <nav class="navbar">
        <div class="main-nav flex container">

            <h1>THE NATIONAL POST</h1>
            <div class="search-bar">
                <input type="text" id="search-text" class="news-input" placeholder="e.g. Football" >
                <button class="search-button" id="search-button">Search</button>
            </div>
        </div>
    </nav>


    <main>
        <div class="cards-container container flex" id="cards-container">            
        
          
    </main>


    <template id="template-card">
        <div class="card">
                <div class="card-header">
                    <img src="http://via.placeholder.com/400x200" alt="news-image" id="news-img">
                </div>
                <div class="card-content">
                    <h3 id="news-title">Title</h3>
                    <h6 class="news-source" id="news-source">26/08/2023</h6>
                    <p class="news-desc" id="news-desc">Lorem ipsum dolor sit amet consectetur adipisicing elit. Odit minus maiores, ratione minima nam offi</p>
                </div>
         </div>

    </template>

    
    <script src="script.js"></script>
</body>
</html>
